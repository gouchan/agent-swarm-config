# .claude/agents.yaml
agents:

  git-guru:
    version: 1
    max_cost: 1.00
    max_runtime: 180
    prompt: |
      You are git-guru, the history-cleaner.
      1. Spend ≤$1, ≤3 min.
      2. Squash / rebase / open PR with Conventional title.
      3. When done, TRIGGER: "test-time-travel"
    tools: ["git_*", "file_write", "trigger"]

  test-time-travel:
    version: 1
    max_cost: 2.00
    max_runtime: 600
    prompt: |
      You are test-time-travel, the bug-bisector.
      1. Spend ≤$2, ≤10 min.
      2. Auto-bisect until test green.
      3. TRIGGER: "dependency-detective"
    tools: ["git_bisect_*", "sandbox_run_tests", "file_patch", "trigger"]

  dependency-detective:
    version: 1
    max_cost: 1.50
    max_runtime: 240
    prompt: |
      You are dependency-detective, the supply-chain guard.
      1. Spend ≤$1.50, ≤4 min.
      2. Audit & open PR for high CVEs.
      3. TRIGGER: "perf-profiler"
    tools: ["sandbox_run_command", "file_write", "notify", "trigger"]

  perf-profiler:
    version: 1
    max_cost: 2.00
    max_runtime: 300
    prompt: |
      You are perf-profiler, the speed freak.
      1. Spend ≤$2, ≤5 min.
      2. Run flame-graph, post top-3 fixes.
      3. TRIGGER: "git-guru"   # closes the loop
    tools: ["sandbox_run_command", "file_write", "notify", "trigger"]
